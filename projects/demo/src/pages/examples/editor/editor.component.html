<tui-doc-page header="Editor">
    Our graph editor is built to serve as an API-first platform, enabling developers to design their own UI elements and
    interact with the graph through exposed methods. This approach allows for the addition of new nodes and control over
    the zoom level, complete with the ability to display the current zoom, all while providing a customizable experience
    tailored to your application's needs.

    <section class="tui-space_top-4">
        <tui-doc-example
            style="padding: 0"
            [content]="customNodeExample"
        >
            <div
                class="editor"
                [ngClass]="{fullscreen: fullscreen$ | async}"
            >
                <ng-draw-flow
                    [formControl]="form"
                    (connectionCreated)="onConnectionCreated($event)"
                    (connectionDeleted)="onConnectionDeleted($event)"
                    (connectionSelected)="onConnectionSelected($event)"
                    (nodeDeleted)="onNodeDeleted($event)"
                    (nodeMoved)="onNodeMoved($event)"
                    (nodeSelected)="onNodeSelected($event)"
                    (scale)="onScaleChange($event)"
                />

                <button
                    size="s"
                    tuiButton
                    type="button"
                    class="add"
                    (click)="addNodeToDrawFlow()"
                >
                    Add node
                </button>

                <button
                    size="s"
                    tuiButton
                    type="button"
                    class="fullscreen-btn"
                    (click)="toggleFullscreen()"
                >
                    {{ (fullscreen$ | async) ? 'Exit from fullscreen' : 'Fullscreen' }}
                </button>

                <div class="scale-controls">
                    <button
                        size="s"
                        tuiButton
                        type="button"
                        (click)="drawFlowStore.zoomOut()"
                    >
                        zoomOut
                    </button>

                    <tui-textfield
                        tuiTextfieldSize="m"
                        tuiTheme="light"
                        class="scale-field"
                        [tuiTextfieldCleaner]="false"
                    >
                        <label tuiLabel>Set scale</label>

                        <input
                            aria-label="Set scale"
                            tuiInputNumber
                            [formControl]="scaleControl"
                            [max]="panZoomOptions.maxZoom"
                            [min]="panZoomOptions.minZoom"
                            [step]="panZoomOptions.zoomStep"
                        />
                    </tui-textfield>

                    <div class="scale-value">{{ drawFlowStore.scale$ | async }}%</div>

                    <button
                        size="s"
                        tuiButton
                        type="button"
                        (click)="drawFlowStore.zoomIn()"
                    >
                        zoomIn
                    </button>
                </div>

                <div class="selection-info">
                    <ng-container *ngIf="drawFlowStore.selectedNode() as node; else connectionInfo">
                        <div class="selection-title">Selected node</div>
                        <div class="selection-value">{{ node.id }}</div>
                    </ng-container>

                    <ng-template #connectionInfo>
                        <ng-container *ngIf="drawFlowStore.selectedConnection() as connection; else noSelection">
                            <div class="selection-title">Selected connection</div>
                            <div class="selection-value">
                                {{ connection.source.nodeId }} â†’ {{ connection.target.nodeId }}
                            </div>
                        </ng-container>
                    </ng-template>

                    <ng-template #noSelection>
                        <div class="selection-title">Nothing selected</div>
                    </ng-template>
                </div>
            </div>
        </tui-doc-example>
    </section>
</tui-doc-page>
