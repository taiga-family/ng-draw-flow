<ng-container *ngFor="let node of model?.nodes | keyvalue: originalOrder; trackBy: trackByNodeFn">
    <df-node
        [invalid]="$invalidNodes().includes(node.key)"
        [node]="node.value"
        (connectorDeleted)="onConnectorDeleted($event)"
        (nodeDeleted)="onNodeDeleted(node.key)"
        (nodeMoved)="onNodeMoved(node.key, $event)"
        (nodeSelected)="onNodeSelected($event)"
    />
</ng-container>

<ng-container *ngFor="let connection of model?.connections; trackBy: trackByConnectionsFn">
    <df-connection
        [connection]="connection"
        (connectionDeleted)="onConnectionDeleted(connection)"
        (connectionSelected)="connectionSelected.emit(connection)"
    />
</ng-container>

<df-draft-connection
    *ngIf="isConnectionCreating$ | async"
    (connectionCreated)="onConnectionCreated($event)"
/>
