.connection {
    --df-connection-current-color: var(--df-connection-color);
    --df-connection-current-hover-color: var(--df-connection-color-hover);
    --df-connection-current-selectable-color: var(--df-connection-selectable-area-color);

    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    aspect-ratio: 1 / 1;
    shape-rendering: auto;

    &.optimize-speed {
        shape-rendering: optimizespeed;

        .main-path {
            transform: translateZ(0);
        }
    }

    .main-path {
        fill: none;
        stroke-width: var(--df-connection-stroke-width);
        stroke: var(--df-connection-current-color);
        pointer-events: none;

        &.df-selected {
            stroke: var(--df-connection-color-active);
        }
    }

    .selectable-area {
        fill: none;
        stroke-width: var(--df-connection-selectable-area-stroke-width);
        stroke: transparent;
        pointer-events: stroke;
        cursor: pointer;
        transition: stroke 0.3s;

        &:hover {
            stroke: var(--df-connection-current-selectable-color);

            & + .main-path {
                stroke: var(--df-connection-current-hover-color);
            }
        }
    }

    .label-container {
        inline-size: 100%;
        block-size: 100%;
    }

    .label {
        position: absolute;
        transform: translate(-50%, -50%);
        user-select: none;
        pointer-events: all;
        white-space: nowrap;
        font: var(--df-connection-label-font, 0.625rem/1 sans-serif);
        color: var(--df-connection-label-color, var(--df-connection-color));
        background: var(--df-connection-label-background, #fff);
        border: 0.0625rem solid var(--df-connection-label-border-color, #b1b1b7);
        border-radius: var(--df-connection-label-border-radius, 0.125rem);
        padding: var(--df-connection-label-padding, 0.125rem 0.25rem);
    }
}

:host(.df-selected-node-input) {
    .connection {
        --df-connection-current-color: var(
            --df-connection-selected-node-input-color,
            var(--df-connector-input-color, var(--df-connection-color)),
        );
        --df-connection-current-hover-color: var(
            --df-connection-selected-node-input-hover-color,
            var(--df-connector-input-color-hover, var(--df-connection-color-hover)),
        );
        --df-connection-current-selectable-color: var(
            --df-connection-selected-node-input-hover-color,
            var(--df-connector-input-color-hover, var(--df-connection-selectable-area-color)),
        );
    }
}

:host(.df-selected-node-output) {
    .connection {
        --df-connection-current-color: var(
            --df-connection-selected-node-output-color,
            var(--df-connector-output-color, var(--df-connection-color)),
        );
        --df-connection-current-hover-color: var(
            --df-connection-selected-node-output-hover-color,
            var(--df-connector-output-color-hover, var(--df-connection-color-hover)),
        );
        --df-connection-current-selectable-color: var(
            --df-connection-selected-node-output-hover-color,
            var(--df-connector-output-color-hover, var(--df-connection-selectable-area-color)),
        );
    }
}
